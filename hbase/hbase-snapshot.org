#+title: hbase 的快照
* 快照的使用场景
1. 从用户/应用异常中还原
2. 从一个已知的安全状态恢复/还原
3. 查看之前的快照并有选择性的合并不同写入产品环境
4. 当主应用程序升级或改版时保存快照
5. 在指定时间审查和/或报告数据
6. 按照规定捕获月度数据
7. 生成日终/月末/季末报告
8. 应用测试：通过快照模拟生产环境下结构或应用发生的变化,测试完成即可丢弃。例如:生成快照,利用快照中内容构建新表(原有结构+数据)并且修改新表的结构,添加或删除列之类。(原始表、快照和新表保持相互独立)
10. 减少工作压力：生成快照,导入到其他集群,然后运行 MapReduce jobs。因为导出的快照是HDFS级别,所以不会像复制表那样降低 HBase主集群的效率
* 快照操作
1. 生成快照:本操作尝试对指定表生成快照。如果集群在执行数据均衡、分隔或合并等操作时,可能会引起操作失败。
2. 克隆快照:本操作使用与指定快照相同的结构数据构建一张新表操作结果会生成一张有完整功能的表,对该表的任意修改不会对原表或快照产生影响。
3. 还原快照:本操作将表结构和数据恢复到生成快照时的状态。(注意:本操作会舍弃快照生成后任何改变)。
4. 删除快照:本操作将系统中的快照删除,释放未共享的磁盘空间,而且不会影响其他克隆或快照
5. 导出快照:本操作将快照数据和元数据复制到其他集群。操作只会涉及HDFS,不会与 Master或域服务器产生任何联系,因此 HBase集群可以关闭。
